<% layout("/layouts/boilerplate") %>


<link rel="stylesheet" href="/css/edit.css"

<div class="card">
  <h2>Edit Room Details</h2>
  <form method="POST" action="/listings/<%= listing._id %> ?_method = PUT">
    <label for="title">Room Title</label>
    <input
      type="text"
      id="title"
      name="title"
      value="Modern Studio Apartment"
    />

    <label for="location">Location</label>
    <input type="text" id="location" name="location" value="San Francisco" />

    <label for="price">Price per Night ($)</label>
    <input type="number" id="price" name="price" value="180" />

    <label for="duration">Available Duration (days)</label>
    <input type="number" id="duration" name="duration" value="5" />

    <!-- Facility Box -->
    <div class="facilities-box">
      <h3>Facilities</h3>

      <label for="food">Food Facility</label>
      <select id="food" name="food">
        <option>Available</option>
        <option>Not Available</option>
      </select>

      <label for="water">Water Supply</label>
      <select id="water" name="water">
        <option>24/7</option>
        <option>Limited</option>
        <option>Not Available</option>
      </select>

      <label for="furniture">Furniture</label>
      <select id="furniture" name="furniture">
        <option>Fully Furnished</option>
        <option>Semi Furnished</option>
        <option>Not Furnished</option>
      </select>
    </div>

    <label for="description">Description</label>
    <textarea id="description" name="description">
A stylish modern apartment located in the heart of downtown.</textarea
    >

    <div class="image-upload">
      <label class="file-label">
        Upload New Image
        <input type="file" id="image" name="image" accept="image/*" />
      </label>
      <img
        id="preview"
        class="image-preview"
        src="https://source.unsplash.com/700x400/?apartment"
        alt="Current image"
      />
    </div>

    <a href="/show"><button type="submit">Save Changes</button></a>
  </form>
</div>

<script>
  const imageInput = document.getElementById("image");
  const preview = document.getElementById("preview");

  imageInput.addEventListener("change", function () {
    const file = this.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function (e) {
        preview.src = e.target.result;
      };
      reader.readAsDataURL(file);
    }
  });

  document.getElementById("editForm").addEventListener("submit", function (e) {
    e.preventDefault();
    alert("Room details updated successfully!");
    // Add logic to send data to backend
  });
</script>
